define(["@grafana/data","@grafana/runtime","lodash","@emotion/css","@grafana/ui","react"],((e,t,r,n,o,a)=>(()=>{"use strict";var l={89:e=>{e.exports=n},781:t=>{t.exports=e},531:e=>{e.exports=t},7:e=>{e.exports=o},241:e=>{e.exports=r},959:e=>{e.exports=a}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return l[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{c.r(u),c.d(u,{plugin:()=>Lt});var e=c(781),t=c(531);function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const a=(e,t,r,n)=>t?e.replace(t,r,n):t,l=(e,t,r={})=>{let i=n({},e);return Object.keys(i).forEach((e=>{if("refId"!==e){const c=i[e];if("string"==typeof c)i=o(n({},i),"query"===e?{[e]:a(t,c,r,"csv")}:{[e]:a(t,c,r)});else if(Array.isArray(c)){const a=c.map((e=>l(e,t,r)));i=o(n({},i),{[e]:a})}}})),i};var i,s,p,b,y,f,g=c(241);!function(e){e.Commits="Commits",e.Issues="Issues",e.Contributors="Contributors",e.Tags="Tags",e.Releases="Releases",e.Pull_Requests="Pull_Requests",e.Labels="Labels",e.Repositories="Repositories",e.Organizations="Organizations",e.GraphQL="GraphQL",e.Milestones="Milestones",e.Packages="Packages",e.Vulnerabilities="Vulnerabilities",e.Projects="Projects",e.ProjectItems="ProjectItems",e.Stargazers="Stargazers",e.Workflows="Workflows",e.Workflow_Usage="Workflow_Usage"}(i||(i={})),function(e){e.NPM="NPM",e.RUBYGEMS="RUBYGEMS",e.MAVEN="MAVEN",e.DOCKER="DOCKER",e.DEBIAN="DEBIAN",e.NUGET="NUGET",e.PYPI="PYPI"}(s||(s={})),function(e){e[e.ClosedAt=0]="ClosedAt",e[e.CreatedAt=1]="CreatedAt",e[e.MergedAt=2]="MergedAt",e[e.None=3]="None"}(p||(p={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.ClosedAt=1]="ClosedAt",e[e.UpdatedAt=2]="UpdatedAt"}(b||(b={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.UpdatedAt=1]="UpdatedAt"}(y||(y={})),function(e){e[e.ORG=0]="ORG",e[e.USER=1]="USER"}(f||(f={}));const m="Issues",O=e=>{if(e.queryType===i.Repositories&&(0,g.isEmpty)(e.owner))return!1;if((e.queryType===i.Commits||e.queryType===i.Contributors||e.queryType===i.Tags||e.queryType===i.Releases||e.queryType===i.Labels||e.queryType===i.Milestones||e.queryType===i.Vulnerabilities||e.queryType===i.Stargazers)&&((0,g.isEmpty)(e.owner)||(0,g.isEmpty)(e.repository)))return!1;if(e.queryType===i.Projects){var t,r,n;if((0,g.isEmpty)(null===(t=e.options)||void 0===t?void 0:t.user)&&(null===(r=e.options)||void 0===r?void 0:r.kind)===f.USER)return!1;if((0,g.isEmpty)(null===(n=e.options)||void 0===n?void 0:n.organization))return!1}return!!e.queryType};function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}const v={userId:"userId",login:"login",email:"email",avatarUrl:"avatarUrl",time:"time",timeEnd:"timeEnd",title:"title",text:"text",tags:"tags"};function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){j(e,t,r[t])}))}return e}function P(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const E=t=>{if((e=>!("annotation"in e))(t))return t;const{annotation:r}=t,n=P(t,["annotation"]),{field:o,timeField:a}=r,l=P(r,["field","timeField"]);return i=w({},n),c=null!=(c={target:l,mappings:w({text:o?{source:e.AnnotationEventFieldSource.Field,value:o}:void 0,time:a?{source:e.AnnotationEventFieldSource.Field,value:a}:void 0},n.mappings)})?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(c)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(c,e))})),i;var i,c};function S(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){S(a,n,o,l,i,"next",e)}function i(e){S(a,n,o,l,i,"throw",e)}l(void 0)}))}}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){C(e,t,r[t])}))}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class q extends t.DataSourceWithBackend{query(r){return(r=>{r.app!==e.CoreApp.Dashboard&&r.app!==e.CoreApp.PanelViewer&&r.targets.forEach((e=>{let n={app:r.app,queryType:e.queryType};var o,a,l,i,c,u,s,f;"Issues"===e.queryType&&(n.timeField=b[null!==(a=null===(o=e.options)||void 0===o?void 0:o.timeField)&&void 0!==a?a:0]),"Pull_Requests"===e.queryType&&(n.timeField=p[null!==(i=null===(l=e.options)||void 0===l?void 0:l.timeField)&&void 0!==i?i:0]),"Workflows"===e.queryType&&(n.timeField=y[null!==(u=null===(c=e.options)||void 0===c?void 0:c.timeField)&&void 0!==u?u:0]),"Packages"===e.queryType&&(n.timeField=null!==(f=null==e||null===(s=e.options)||void 0===s?void 0:s.packageType)&&void 0!==f?f:"NPM"),(0,t.reportInteraction)("grafana_github_query_executed",n)}))})(r),super.query(r)}applyTemplateVariables(e,t){return((e,t,r)=>{let a=n({},t);return a=l(a,e,r),t.options&&(a=o(n({},a),{options:l(t.options,e,r)})),a})(this.templateSrv,e,t)}annotationQuery(t){var r=this;return k((function*(){var n;const{annotation:o}=t.annotation,a={targets:[D(T({},o),{datasourceId:r.id,refId:r.name})],range:t.range,interval:t.interval},l=yield r.query(a).toPromise();return(null==l||null===(n=l.data)||void 0===n?void 0:n.length)?function(t,r){const n=[];if(!t||!t.length)return n;let o=!1,a=!1;const l={};for(const e of t.fields)l[e.name.toLowerCase()]=e;r=h({field:{},regex:{}},r);const i=[],c=h({},v,null==r?void 0:r.field);for(const[e,t]of Object.entries(c)){const n=t?t.toLowerCase():"";if(n&&l[n]){const t={key:e,field:l[n]};switch(t.key){case"time":o=!0;break;case"text":a=!0;break;case"tags":t.split=","}const c=r.regex[t.key];c&&(t.regex=new RegExp(c)),i.push(t)}}if(!o){const r=t.fields.find((t=>t.type===e.FieldType.time));if(!r)return[];i.push({key:"time",field:r})}if(!a){var u;const n=t.fields.find((t=>t.type===e.FieldType.string));if(!n)return[];const o={key:"text",field:n};(null==r||null===(u=r.regex)||void 0===u?void 0:u.text)&&(o.regex=new RegExp(r.regex.text)),i.push(o)}for(let e=0;e<t.length;e++){const t={};for(const r of i){let n=r.field.values.get(e);if(r.regex){const e=r.regex.exec(n);e&&(n=e[1]?e[1]:e[0])}r.split&&(n=n.split(",")),t[r.key]=n}n.push(t)}return n}(l.data[0],{field:{time:o.timeField,text:o.field||"name"}}):[]}))()}getChoices(e){var t=this;return k((function*(){const r={targets:[D(T({},e),{refId:"metricFindQuery"})],range:{to:{},from:{}}};try{var n;const e=yield t.query(r).toPromise();return((null==e||null===(n=e.data[0])||void 0===n?void 0:n.fields)||[]).map((e=>e.name))||[]}catch(e){return Promise.reject(e)}}))()}metricFindQuery(t,r){var n=this;return k((function*(){const o={targets:[D(T({},t),{refId:"metricFindQuery"})],range:r.range};try{var a;const r=yield n.query(o).toPromise();return(null==r||null===(a=r.data)||void 0===a?void 0:a.length)?new e.DataFrameView(r.data[0]).map((e=>({value:e[t.key||""]||e[t.field||"name"],text:e[t.field||"name"]}))):[]}catch(e){return Promise.reject(e)}}))()}constructor(e){super(e),C(this,"templateSrv",(0,t.getTemplateSrv)()),C(this,"filterQuery",(e=>O(e)&&!e.hide)),this.annotations={prepareAnnotation:E}}}var F=c(89),I=c(959),x=c.n(I),R=c(7),A=Object.defineProperty,N=Object.defineProperties,G=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&W(e,r,t[r]);if(B)for(var r of B(t))U.call(t,r)&&W(e,r,t[r]);return e};const _=({dataSourceName:e,docsLink:t,hasRequiredFields:r=!0,className:n})=>{const o=(0,R.useTheme2)(),a={container:(0,F.css)({p:{margin:0},"p + p":{marginTop:o.spacing(2)}}),text:(0,F.css)((l=Q({},o.typography.body),i={color:o.colors.text.secondary,a:(0,F.css)({color:o.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})},N(l,G(i))))};var l,i;return x().createElement("div",{className:(0,F.cx)(a.container,n)},x().createElement("p",{className:a.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",x().createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),r&&x().createElement("p",{className:a.text},x().createElement("i",null,"Fields marked with * are required")))};var M=Object.defineProperty,z=Object.defineProperties,V=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Y=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&Y(e,r,t[r]);if(H)for(var r of H(t))J.call(t,r)&&Y(e,r,t[r]);return e};const X=({children:e,title:t,description:r,isCollapsible:n=!1,isInitiallyOpen:o=!0,kind:a="section",className:l})=>{const{colors:i,typography:c,spacing:u}=(0,R.useTheme2)(),[s,p]=(0,I.useState)(!n||o),b=s?"angle-up":"angle-down",y="sub-section"===a,f=`${s?"Collapse":"Expand"} section ${t}`,g={header:(0,F.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,F.css)({margin:0}),subtitle:(0,F.css)({margin:0,fontWeight:c.fontWeightRegular}),descriptionText:(0,F.css)((m=K({marginTop:u(y?.25:.5),marginBottom:0},c.bodySmall),O={color:i.text.secondary},z(m,V(O)))),content:(0,F.css)({marginTop:u(2)})};var m,O;return x().createElement("div",{className:l},x().createElement("div",{className:g.header},"section"===a?x().createElement("h3",{className:g.title},t):x().createElement("h6",{className:g.subtitle},t),n&&x().createElement(R.IconButton,{name:b,onClick:()=>p(!s),type:"button",size:"xl","aria-label":f})),r&&x().createElement("p",{className:g.descriptionText},r),s&&x().createElement("div",{className:g.content},e))};var Z=Object.defineProperty,ee=Object.defineProperties,te=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const le=e=>{var t,r=e,{children:n}=r,o=((e,t)=>{var r={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&re)for(var n of re(e))t.indexOf(n)<0&&oe.call(e,n)&&(r[n]=e[n]);return r})(r,["children"]);return x().createElement(X,(t=((e,t)=>{for(var r in t||(t={}))ne.call(t,r)&&ae(e,r,t[r]);if(re)for(var r of re(t))oe.call(t,r)&&ae(e,r,t[r]);return e})({},o),ee(t,te({kind:"section"}))),n)},ie="data-testid Access Token",ce={container:{ariaLabel:"Query Type container"}},ue={input:"Query editor owner"},se={input:"Query editor repository"},pe={input:"Query editor ref"},be={input:"Query editor number"},ye={timeFieldInput:"Query editor issues time field"},fe=()=>{const e=(0,R.useStyles2)(ge);return x().createElement("hr",{className:e.horizontalDivider})},ge=e=>({horizontalDivider:(0,F.css)({borderTop:`1px solid ${e.colors.border.weak}`,margin:e.spacing(2,0),width:"100%"})});function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){me(e,t,r[t])}))}return e}function de(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const he=e=>({externalLink:F.css`
      text-decoration: underline;
    `,radioButton:F.css`
      margin-bottom: ${e.spacing(2)};
    `}),ve=e=>{const t=je();return x().createElement(R.InlineFieldRow,{className:t.rowSpacing},e.children)},je=()=>({rowSpacing:(0,F.css)({marginBottom:"4px"})});function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){we(e,t,r[t])}))}return e}function Ee(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Se=e=>{const[t,r]=(0,I.useState)(e.repository||""),[n,o]=(0,I.useState)(e.owner||"");return(0,I.useEffect)((()=>{r(e.repository||"")}),[e.repository]),(0,I.useEffect)((()=>{o(e.owner||"")}),[e.owner]),x().createElement(ve,null,x().createElement(R.InlineLabel,{tooltip:"The owner (organization or user) of the GitHub repository (example: 'grafana')",width:2*kt},"Owner"),x().createElement(R.Input,{"aria-label":ue.input,width:Ct,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(Ee(Pe({},e),{owner:t.currentTarget.value}))}),x().createElement(R.InlineLabel,{tooltip:"The name of the GitHub repository",width:2*kt},"Repository"),x().createElement(R.Input,{"aria-label":se.input,width:Ct,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Ee(Pe({},e),{repository:t.currentTarget.value}))}))},ke=()=>x().createElement(x().Fragment,null);function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Te=e=>{const[t,r]=(0,I.useState)(e.gitRef||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Ref (Branch / Tag)"},x().createElement(R.Input,{"aria-label":pe.input,width:Ct,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ce(e,t,r[t])}))}return e}({},e),n=null!=(n={gitRef:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){De(e,t,r[t])}))}return e}function Fe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ie=Object.keys(b).filter(((e,t)=>void 0!==b[t])).map(((e,t)=>({label:`${b[t]}`,value:t}))),xe=e=>{const[t,r]=(0,I.useState)(e.query||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Query",tooltip:()=>x().createElement(x().Fragment,null,"For more information, visit ",x().createElement("a",{href:"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests",target:"_blank",rel:"noreferrer"},"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests")),interactive:!0},x().createElement(R.Input,{value:t,width:2*Ct+kt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Fe(qe({},e),{query:t.currentTarget.value}))})),x().createElement(R.InlineField,{labelWidth:2*kt,label:"Time Field",tooltip:"The time field to filter on the time range"},x().createElement(R.Select,{"data-testid":ye.timeFieldInput,width:Ct,options:Ie,value:e.timeField||0,onChange:t=>e.onChange(Fe(qe({},e),{timeField:t.value}))})))};function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ae=e=>{const[t,r]=(0,I.useState)(e.query||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Query",tooltip:"Query milestones by title"},x().createElement(R.Input,{value:t,width:2*Ct+kt,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Re(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}function Be(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Le=Object.keys(p).filter(((e,t)=>void 0!==p[t])).map(((e,t)=>({label:`${p[t]}`,value:t}))),Ue=Le[0].value,We=e=>{const[t,r]=(0,I.useState)(e.query||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Query",tooltip:()=>x().createElement(x().Fragment,null,"For more information, visit ",x().createElement("a",{href:"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests",target:"_blank",rel:"noreferrer"},"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests")),interactive:!0},x().createElement(R.Input,{value:t,width:Ct,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Be(Ge({},e),{query:t.currentTarget.value}))})),x().createElement(R.InlineField,{labelWidth:2*kt,label:"Time Field",tooltip:"The time field to filter on the time range. WARNING: If selecting 'None', be mindful of the amount of data being queried. On larger repositories, querying all pull requests could easily cause rate limiting"},x().createElement(R.Select,{width:Ct,options:Le,value:e.timeField||Ue,onChange:t=>e.onChange(Be(Ge({},e),{timeField:t.value}))})))},Qe=()=>x().createElement(x().Fragment,null);function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Me=e=>{const[t,r]=(0,I.useState)(e.query||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Query (optional)"},x().createElement(R.Input,{width:Ct,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_e(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ve=e=>{const[t,r]=(0,I.useState)(e.query||"");return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Query (optional)"},x().createElement(R.Input,{width:Ct,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ze(e,t,r[t])}))}return e}({},e),n=null!=(n={query:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){He(e,t,r[t])}))}return e}function Je(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ye=s.NPM,Ke=Object.keys(s).map((e=>({label:e.replace("/_/gi"," "),value:e}))),Xe=e=>{const[t,r]=(0,I.useState)(e.names||"");return(0,I.useEffect)((()=>{e.packageType||e.onChange(Je($e({},e),{packageType:Ye}))}),[e]),x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Package type"},x().createElement(R.Select,{options:Ke,value:e.packageType||Ye,width:Ct,onChange:t=>e.onChange(Je($e({},e),{packageType:t.value}))})),x().createElement(R.InlineField,{labelWidth:2*kt,label:"Names",tooltip:"Search for packages using a comma delimited list of names"},x().createElement(R.Input,{value:t,width:2*Ct+kt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Je($e({},e.query),{names:t.currentTarget.value}))})))},Ze=()=>x().createElement(x().Fragment,null);function et(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function tt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){et(a,n,o,l,i,"next",e)}function i(e){et(a,n,o,l,i,"throw",e)}l(void 0)}))}}function rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){rt(e,t,r[t])}))}return e}function ot(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const at=e=>{const{value:t,onChange:r}=e,[n,o]=(0,I.useState)(t||[]),[a,l]=(0,I.useState)(),i=e=>t=>{p(n.map(((r,n)=>n===e?ot(nt({},r),{value:t.value}):r)))},c=e=>t=>{p(n.map(((r,n)=>n===e?ot(nt({},r),{op:t.value}):r)))},u=e=>t=>{p(n.map(((r,n)=>n===e?ot(nt({},r),{conjunction:t.value}):r)))},s=e=>()=>{p(n.filter(((t,r)=>r!==e)))};function p(e){o(e),r(e)}const b=t=>tt((function*(){l(t);const r=n[t].key,o=yield e.loadOptions(r);return l(void 0),o})),y=n||[],f=["and","or"].map((e=>({label:e,value:e}))),g={loading:F.css`
      position: absolute;
      top: 0;
      padding: 8px 10px;
      font-weight: 500;
      font-size: 12px;
    `,wrapper:F.css`
      position: relative;
    `};return x().createElement(R.InlineFieldRow,null,x().createElement(x().Fragment,null,y.map(((t,r)=>{return x().createElement(x().Fragment,null,x().createElement(R.SegmentAsync,{loadOptions:e.loadOptions,placeholder:"Key...",allowCustomValue:!0,value:t.key,onChange:(l=r,e=>{const t=n.map(((t,r)=>r===l?ot(nt({},t),{key:e.value,value:""}):t));o(t)})}),x().createElement(R.Segment,{placeholder:"Operator...",value:t.op,onChange:c(r),options:e.ops}),x().createElement("span",{className:g.wrapper},x().createElement(R.SegmentAsync,{loadOptions:b(r),placeholder:"Value...",allowCustomValue:!0,value:t.value,onChange:i(r)}),a===r&&x().createElement("div",{className:g.loading},"Loading...")),x().createElement(R.Button,{variant:"secondary",onClick:s(r),icon:"trash-alt"}),y.length>1&&r!==y.length-1&&x().createElement(R.Segment,{onChange:u(r),options:f,value:t.conjunction||"and"}));var l})),x().createElement(R.Button,{variant:"secondary",onClick:()=>{var t;o([...n,{key:"",value:"",op:(null===(t=e.ops[0])||void 0===t?void 0:t.value)||"="}])},icon:"plus"})))};function lt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){it(e,t,r[t])}))}return e}function ut(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}at.displayName="Filters";const st=[{label:"Organization",value:f.ORG},{label:"User",value:f.USER}],pt=[{label:"Type",value:"type"},{label:"Created At",value:"created_at"},{label:"Title",value:"Title"},{label:"Assignees",value:"Assignees"},{label:"Status",value:"Status"},{label:"Labels",value:"Labels"},{label:"Reviewers",value:"Reviewers"},{label:"Milestone",value:"Milestone"},{label:"Iteration",value:"Iteration"}],bt=[{label:"Equal",value:"="},{label:"Not Equal",value:"!="},{label:"Greater Than",value:">"},{label:"Less Than",value:"<"},{label:"Less Than or Equal",value:"<="},{label:"Greater Than or Equal",value:">="},{label:"Contains",value:"~"}],yt=(ft=function*(e){return e?[]:pt},gt=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=ft.apply(e,t);function a(e){lt(o,r,n,a,l,"next",e)}function l(e){lt(o,r,n,a,l,"throw",e)}a(void 0)}))},function(e){return gt.apply(this,arguments)});var ft,gt;function mt(e){if(e.includes("$"))return e;const t=parseInt(e,10);return isNaN(t)?void 0:t}const Ot=e=>{const[t,r]=(0,I.useState)(e.organization||""),[n,o]=(0,I.useState)(e.user||""),[a,l]=(0,I.useState)(e.number),[i,c]=(0,I.useState)(e.kind||f.ORG),[u,s]=(0,I.useState)(e.filters||[]),p=i===f.ORG?"Organization":"User",b=i===f.ORG?"The organization for the GitHub project (example: 'grafana)":"The user who owns the Github project";return x().createElement(x().Fragment,null,x().createElement(ve,null,x().createElement(R.InlineLabel,{tooltip:"The owner of the GitHub project. Does not support classic projects.",width:2*kt},"Project Owner"),x().createElement(R.InlineField,null,x().createElement(R.RadioButtonGroup,{options:st,value:i,onChange:t=>{c(t),e.onChange(ut(ct({},e),{kind:t}))},size:"md"}))),x().createElement(ve,null,x().createElement(R.InlineLabel,{tooltip:b,width:2*kt},p),i===f.ORG&&x().createElement(R.Input,{"aria-label":ue.input,width:Ct,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(ut(ct({},e),{organization:t.currentTarget.value,kind:i}))}),i===f.USER&&x().createElement(R.Input,{"aria-label":ue.input,width:Ct,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(ut(ct({},e),{user:t.currentTarget.value,kind:i}))})),x().createElement(ve,null,x().createElement(R.InlineLabel,{tooltip:"The project number for the GitHub project (example: 123). Does not support classic projects.",width:2*kt},"Project Number"),x().createElement(R.Input,{"aria-label":be.input,width:Ct,value:a,onChange:e=>l(mt(e.currentTarget.value)),onBlur:t=>e.onChange(ut(ct({},e),{number:mt(t.currentTarget.value)}))})),a&&x().createElement(ve,null,x().createElement(R.InlineLabel,{width:2*kt},"Filters"),x().createElement(at,{onChange:t=>{s(t),e.onChange(ut(ct({},e),{filters:t}))},loadOptions:yt,value:u,ops:bt})))};function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ht=Object.keys(y).filter(((e,t)=>void 0!==y[t])).map(((e,t)=>({label:`${y[t]}`,value:t}))),vt=e=>x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Time Field",tooltip:"The time field to filter on the time range"},x().createElement(R.Select,{width:Ct,options:ht,value:e.timeField||0,onChange:t=>{var r,n;e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){dt(e,t,r[t])}))}return e}({},e),n=null!=(n={timeField:t.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r))}})));function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const wt=e=>{const[t,r]=(0,I.useState)(e.workflow);return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{labelWidth:2*kt,label:"Workflow",tooltip:"The workflow id number or file name (e.g my-workflow.yml)"},x().createElement(R.Input,{value:t,width:2*Ct+kt,onChange:e=>r(e.currentTarget.value),onBlur:t=>{return e.onChange((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){jt(e,t,r[t])}))}return e}({},e),n=null!=(n={workflow:t.currentTarget.value})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})),r));var r,n}})))};function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pt(e,t,r[t])}))}return e}function St(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const kt=10,Ct=36,Tt={[i.Repositories]:{component:(e,t)=>x().createElement(x().Fragment,null)},[i.Labels]:{component:(e,t)=>x().createElement(Ve,St(Et({},e.query.options||{}),{onChange:t}))},[i.Contributors]:{component:(e,t)=>x().createElement(Me,St(Et({},e.query.options||{}),{onChange:t}))},[i.Tags]:{component:(e,t)=>x().createElement(Qe,e.query.options||{})},[i.Releases]:{component:(e,t)=>x().createElement(ke,e.query.options||{})},[i.Commits]:{component:(e,t)=>x().createElement(Te,St(Et({},e.query.options||{}),{onChange:t}))},[i.Milestones]:{component:(e,t)=>x().createElement(Ae,St(Et({},e.query.options||{}),{onChange:t}))},[i.Issues]:{component:(e,t)=>x().createElement(xe,St(Et({},e.query.options||{}),{onChange:t}))},[i.Packages]:{component:(e,t)=>x().createElement(Xe,St(Et({},e.query.options||{}),{onChange:t}))},[i.Pull_Requests]:{component:(e,t)=>x().createElement(We,St(Et({},e.query.options||{}),{onChange:t}))},[i.Vulnerabilities]:{component:(e,t)=>x().createElement(Ze,e.query.options||{})},[i.Projects]:{component:(e,t)=>x().createElement(Ot,St(Et({},e.query.options||{}),{onChange:t}))},[i.Stargazers]:{component:(e,t)=>x().createElement(x().Fragment,null)},[i.Workflows]:{component:(e,t)=>x().createElement(vt,St(Et({},e.query.options||{}),{onChange:t}))},[i.Workflow_Usage]:{component:(e,t)=>x().createElement(wt,St(Et({},e.query.options||{}),{onChange:t}))}},Dt=Object.keys(i).map((e=>({label:e.replace(/_/gi," "),value:e}))),qt=[i.Projects,i.ProjectItems],Ft=e=>{const t=(0,I.useCallback)((t=>{e.onChange(t),O(t)&&e.onRunQuery()}),[e]),r=(0,I.useCallback)(((r,n)=>{t(St(Et({},e.query),{[r]:n}))}),[t,e.query]),n=Tt[e.query.queryType||m],o=e.queryTypes||Object.keys(Tt);return x().createElement(x().Fragment,null,x().createElement(R.InlineField,{label:"Query Type",tooltip:"What resource are you querying for?",labelWidth:2*kt},x().createElement("div",{"aria-label":ce.container.ariaLabel},x().createElement(R.Select,{menuShouldPortal:!0,width:Ct,options:Dt.filter((e=>o.includes(e.value))),value:e.query.queryType,onChange:e=>r("queryType",e.value||m)}))),(a=e.query.queryType,!qt.includes(a)&&x().createElement(Se,{repository:e.query.repository,owner:e.query.owner,onChange:r=>{t(Et({},e.query,r))}})),n?n.component(e,(e=>r("options",e||void 0))):x().createElement("span",null,"Unsupported Query Type"));var a},It=F.css`
  margin: 0px 3px;
  padding: 0px 3px;
`,xt=e=>{const{onChange:t,options:r,value:n,width:o,loading:a}=e;return x().createElement(R.InlineFieldRow,null,x().createElement(R.Select,{allowCustomValue:!0,value:n,onChange:e=>t(e.value),width:o,disabled:a,placeholder:a?"Loading...":"Select...",options:r.map((e=>({label:e,value:e})))}),a&&x().createElement("div",null,x().createElement(R.Spinner,{className:It})))};function Rt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function At(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){Rt(a,n,o,l,i,"next",e)}function i(e){Rt(a,n,o,l,i,"throw",e)}l(void 0)}))}}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Nt(e,t,r[t])}))}return e}function Bt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Lt=new e.DataSourcePlugin(q).setConfigEditor((t=>{const{options:r,onOptionsChange:n}=t,{jsonData:o,secureJsonData:a,secureJsonFields:l}=r,i=a||{},c=(0,R.useStyles2)(he),[u,s]=(0,I.useState)(o.githubUrl?"github-enterprise":"github-basic"),[p,b]=(0,I.useState)(!0),y=(e,r=!0)=>n=>{const{onOptionsChange:o,options:a}=t;o(de(Oe({},a),{secureJsonData:de(Oe({},a.secureJsonData),{[e]:n.target.value}),secureJsonFields:de(Oe({},a.secureJsonFields),{[e]:r})}))};return x().createElement(x().Fragment,null,x().createElement(_,{dataSourceName:"GitHub",docsLink:"https://grafana.com/grafana/plugins/grafana-github-datasource/",hasRequiredFields:!1}),x().createElement(fe,null),x().createElement(R.Collapse,{collapsible:!0,label:"Access Token Permissions",isOpen:p,onToggle:()=>b((e=>!e))},x().createElement("p",null,"To create a new Access Token, navigate to"," ",x().createElement("a",{className:c.externalLink,href:"https://github.com/settings/tokens",target:"_blank",rel:"noreferrer"},"Personal Access Tokens")," ",'and create a click "Generate new token."'),x().createElement("p",null,"Ensure that your token has the following permissions:"),x().createElement("b",null,"For all repositories:"),x().createElement("pre",null,"public_repo, repo:status, repo_deployment, read:packages, read:user, user:email"),x().createElement("b",null,"For Github projects:"),x().createElement("pre",null,"read:org, read:project"),x().createElement("b",null,"An extra setting is required for private repositories:"),x().createElement("pre",null,"repo (Full control of private repositories)")),x().createElement(fe,null),x().createElement(le,{title:"Connection"},x().createElement(R.Field,{label:"Access Token"},x().createElement(R.SecretInput,{placeholder:"GitHub Personal Access Token","data-testid":ie,value:i.accessToken||"",isConfigured:l.accessToken,onChange:y("accessToken",!1),onReset:("accessToken",()=>{y("accessToken",!1)({target:{value:""}})}),width:40}))),x().createElement(fe,null),x().createElement(le,{title:"Additional Settings",isCollapsible:!0},x().createElement(R.Label,null,"GitHub License"),x().createElement(R.RadioButtonGroup,{options:[{label:"Basic",value:"github-basic"},{label:"Enterprise",value:"github-enterprise"}],value:u,onChange:e=>{"github-basic"===e&&n(de(Oe({},r),{jsonData:de(Oe({},o),{githubUrl:""})})),s(e)},className:c.radioButton}),"github-enterprise"===u&&x().createElement(R.Field,{label:"GitHub Enterprise URL"},x().createElement(R.Input,{placeholder:"URL of GitHub Enterprise",value:o.githubUrl,onChange:(0,e.onUpdateDatasourceJsonDataOption)(t,"githubUrl"),width:40}))))})).setVariableQueryEditor((e=>{const t=`${e.datasource.name} - ${e.query.queryType||m}`,[r,n]=(0,I.useState)();return(0,I.useMemo)(At((function*(){O(e.query)&&n(yield e.datasource.getChoices(e.query))})),[e.query,e.datasource]),x().createElement(x().Fragment,null,x().createElement(Ft,{query:e.query,datasource:e.datasource,onChange:r=>e.onChange(Bt(Gt({},r),{field:e.query.field}),t),onRunQuery:()=>{}}),x().createElement(R.InlineField,{labelWidth:20,label:"Field Value",tooltip:"This field determines the value used for the variable"},x().createElement(xt,{onChange:r=>e.onChange(Bt(Gt({},e.query),{key:r}),t),options:r||[],width:64,value:e.query.key,loading:!r})),x().createElement(R.InlineField,{labelWidth:20,label:"Field Display",tooltip:"This field determines the text used for the variable"},x().createElement(xt,{onChange:r=>e.onChange(Bt(Gt({},e.query),{field:r}),t),options:r||[],width:64,value:e.query.field,loading:!r})))})).setQueryEditor(Ft)})(),u})()));
//# sourceMappingURL=module.js.map